@page "/properties/index"
@* @page "/properties/index/{Uid?}" *@
@* Author: Johan Nelin *@
@using BostadzPortalenClient.Pages.R_EstatePge
@using BostadzPortalenClient.Components.R_Estate
@using BostadzPortalenClient.Services
@using BostadzPortalenClient.Components
@inject IPropertyForSaleService propService
@inject IRealtorService realtorService


<div class="background-image"></div>
<div class="background-overlay"></div>


@* <div class="row">
    <div class="col-9 mx-auto">
        <h3>Bostäder till salu - just nu</h3>
        <hr class="divider" />

        <div class="row"> *@
@if (allProperties != null)
{
	<Paginator_REstate properties="allProperties"></Paginator_REstate>
}
else
{
	<p>Laddar fastigheter...</p>
}
@*    </div>
    </div>
</div> *@
@* <h3>Bostäder till salu - just nu</h3>

<hr class=" divider" />
<div class="row">
    @if (allProperties != null)
    {
        @foreach (var property in allProperties)
        {
            <div>
                <RealEstateCardComponent realEstate="property"></RealEstateCardComponent>
            </div>
        }
    }
    else
    {
        <p>Laddar fastigheter...</p>
    }
</div> *@


@code {
	private List<PropertyForSaleOverviewDTO> allProperties { get; set; }
	[Parameter]
	public string? Uid { get; set; }

	protected override async Task OnInitializedAsync()
	{
		if (!string.IsNullOrEmpty(Uid))
		{
			allProperties = await propService.GetMyListingsAsync();
		}
		else
		{
			allProperties = await propService.GetAllPropertiesForSaleDTOAsync();
		}

	}
}
